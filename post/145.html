
            <!DOCTYPE html>
            <html lang="en">

            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="google-site-verification" content="jrh7qB1kgowvnvE0P3KqlhI-iNmw9CvGJF4dQsaCTAk" />
                <meta name="naver-site-verification" content="6fe49ccdb8613221b89ae2d580300c63a91af446" />
                
                
            <link rel="icon" href="https://ballboyDev.github.io/assets/img/bDev.ico">
            <link rel="stylesheet" href="https://ballboyDev.github.io/assets/markdown.css">
            <link rel="stylesheet" href="https://ballboyDev.github.io/assets/skin.css">

            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>

            <style>
                #p-145 {
                    color: rgb(76, 193, 237) !important;
                }
            </style>
            <script id="data" type="application/json">{ "fold": ["1","13","132"] }</script>

            <script src="https://ballboyDev.github.io/assets/skin.js"></script>
            <script src="https://ballboyDev.github.io/assets/env.js"></script>
            

                <title>5. Multi Container</title>
            </head>

            <body>
                <div id="wrapper">
                    <!-- side bar component -->
                    <div id="head-bar">
                        <img id="openNavi" class="menu"
                            src="https://ballboyDev.github.io/assets/img/menu.svg"
                            alt="" srcset="">
                        <div class="title">심심한 개발자의 취미생활</div>
                        <img class="img"
                            src="https://ballboyDev.github.io/assets/img/profile.jpeg"
                            alt="" srcset="">
                    </div>
                    <div id="side-bar">
                        <img id="closeNavi" class="close"
                            src="https://ballboyDev.github.io/assets/img/close.svg"
                            alt="" srcset="">
                        <div class="profile">
                            <img class="img" src="https://ballboyDev.github.io/assets/img/profile.jpeg" alt="" srcset="">
                            <p>심심한 개발자의 취미생활</p>
                        </div>
                        <hr />
                        <h3 class="home"><a href="https://ballboyDev.github.io">HOME</a></h3>
                        <hr />
                        
                        <h3 class="category" onclick="foldNavi()">카테고리</h3>
                        <div class="navi">
                            <ul class="root">

                                <li id="dt-undefined"  onclick="foldNavi('undefined')">secret (0)</li>
<ul id="dc-undefined" class='dc-all' style="display: none;">

</ul>
<li id="dt-1"  onclick="foldNavi('1')">심심한 개발자의 개발 공부 (52)</li>
<ul id="dc-1" class='dc-all' style="display: block;">
<a href="https://ballboyDev.github.io/post/108">
<li id="p-108">• Backend 학습 로드맵</li>
</a>
<li id="dt-11"  onclick="foldNavi('11')">개발 정보 정리 (13)</li>
<ul id="dc-11" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/3">
<li id="p-3">• vim 에디터 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/31">
<li id="p-31">• json객체와 Map()의 비교</li>
</a>
<a href="https://ballboyDev.github.io/post/32">
<li id="p-32">• 배열 생성 성능 비교</li>
</a>
<a href="https://ballboyDev.github.io/post/36">
<li id="p-36">• console 객체 활용하기</li>
</a>
<a href="https://ballboyDev.github.io/post/58">
<li id="p-58">• 자주쓰는 git/git-flow 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/69">
<li id="p-69">• curl 명령어 사용법 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/73">
<li id="p-73">• node 내장 객체와 내장 모듈 사용하기</li>
</a>
<a href="https://ballboyDev.github.io/post/80">
<li id="p-80">• 터미널 이미지 형식 변환(sips)</li>
</a>
<a href="https://ballboyDev.github.io/post/107">
<li id="p-107">• Shell Script 기초 문법 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/116">
<li id="p-116">• Cookie, Session, JWT, OAuth 개념</li>
</a>
<a href="https://ballboyDev.github.io/post/152">
<li id="p-152">• 네트워크</li>
</a>
<a href="https://ballboyDev.github.io/post/153">
<li id="p-153">• DNS (Domain Name Service)</li>
</a>
<a href="https://ballboyDev.github.io/post/154">
<li id="p-154">• CDN (Contents Deliver Network)</li>
</a>

</ul>
<li id="dt-12"  onclick="foldNavi('12')">svelte, sveltekit (13)</li>
<ul id="dc-12" class='dc-all' style="display: none;">
<li id="dt-121"  onclick="foldNavi('121')">svelte (8)</li>
<ul id="dc-121" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/18">
<li id="p-18">• svelte Basic</li>
</a>
<a href="https://ballboyDev.github.io/post/19">
<li id="p-19">• svelte 속성</li>
</a>
<a href="https://ballboyDev.github.io/post/20">
<li id="p-20">• life cycle</li>
</a>
<a href="https://ballboyDev.github.io/post/21">
<li id="p-21">• runes</li>
</a>
<a href="https://ballboyDev.github.io/post/22">
<li id="p-22">• template Syntax</li>
</a>
<a href="https://ballboyDev.github.io/post/23">
<li id="p-23">• Directive</li>
</a>
<a href="https://ballboyDev.github.io/post/24">
<li id="p-24">• Runtime</li>
</a>
<a href="https://ballboyDev.github.io/post/68">
<li id="p-68">• setting svelte.config.js</li>
</a>

</ul>
<li id="dt-122"  onclick="foldNavi('122')">sveltekit (5)</li>
<ul id="dc-122" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/117">
<li id="p-117">• sveltekit 기본구조</li>
</a>
<a href="https://ballboyDev.github.io/post/118">
<li id="p-118">• 파일 시스템 기반 라우팅</li>
</a>
<a href="https://ballboyDev.github.io/post/119">
<li id="p-119">• 데이터 로드</li>
</a>
<a href="https://ballboyDev.github.io/post/120">
<li id="p-120">• sveltekit API 요청</li>
</a>
<a href="https://ballboyDev.github.io/post/122">
<li id="p-122">• 폼 액션</li>
</a>

</ul>

</ul>
<li id="dt-13"  onclick="foldNavi('13')">Infra (18)</li>
<ul id="dc-13" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/151">
<li id="p-151">• app, docker, kubernetes 인프라 환경의 포트 설정</li>
</a>
<li id="dt-131"  onclick="foldNavi('131')">Docker (9)</li>
<ul id="dc-131" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/77">
<li id="p-77">• docker mariadb setting</li>
</a>
<a href="https://ballboyDev.github.io/post/78">
<li id="p-78">• docker mongodb setting</li>
</a>
<a href="https://ballboyDev.github.io/post/89">
<li id="p-89">• docker network, volume</li>
</a>
<a href="https://ballboyDev.github.io/post/90">
<li id="p-90">• docker compose</li>
</a>
<a href="https://ballboyDev.github.io/post/94">
<li id="p-94">• docker 경량 컨테이너 베이스</li>
</a>
<li id="dt-1311"  onclick="foldNavi('1311')">Docker 기본 명령어 정리 (4)</li>
<ul id="dc-1311" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/81">
<li id="p-81">• Docker image 관련 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/82">
<li id="p-82">• Docker container 관련 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/83">
<li id="p-83">• Docker run 명령어 관련 옵션</li>
</a>
<a href="https://ballboyDev.github.io/post/84">
<li id="p-84">• Dockerfile 명령어 정리</li>
</a>

</ul>

</ul>
<li id="dt-132"  onclick="foldNavi('132')">Kubernetes (8)</li>
<ul id="dc-132" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/141">
<li id="p-141">• 1. Pod, Deployment, Service</li>
</a>
<a href="https://ballboyDev.github.io/post/142">
<li id="p-142">• 2. ConfigMap, Secret</li>
</a>
<a href="https://ballboyDev.github.io/post/143">
<li id="p-143">• 3. Volume, Mount, Clame</li>
</a>
<a href="https://ballboyDev.github.io/post/144">
<li id="p-144">• 4. Scailing, Replicaset</li>
</a>
<a href="https://ballboyDev.github.io/post/145">
<li id="p-145">• 5. Multi Container</li>
</a>
<a href="https://ballboyDev.github.io/post/146">
<li id="p-146">• 6. StatefulSet, Job, ClonJob</li>
</a>
<a href="https://ballboyDev.github.io/post/147">
<li id="p-147">• 7. RollOut, RollBack</li>
</a>
<a href="https://ballboyDev.github.io/post/148">
<li id="p-148">• 8. Helm</li>
</a>

</ul>

</ul>
<li id="dt-14"  onclick="foldNavi('14')">NestJS (6)</li>
<ul id="dc-14" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/125">
<li id="p-125">• NestJS</li>
</a>
<a href="https://ballboyDev.github.io/post/126">
<li id="p-126">• Controller</li>
</a>
<a href="https://ballboyDev.github.io/post/128">
<li id="p-128">• Provider</li>
</a>
<a href="https://ballboyDev.github.io/post/129">
<li id="p-129">• Module</li>
</a>
<a href="https://ballboyDev.github.io/post/130">
<li id="p-130">• Middleware</li>
</a>
<a href="https://ballboyDev.github.io/post/131">
<li id="p-131">• ExceptionFilter</li>
</a>

</ul>
<li id="dt-16"  onclick="foldNavi('16')">Spring (1)</li>
<ul id="dc-16" class='dc-all' style="display: none;">
<li id="dt-161"  onclick="foldNavi('161')">Spring Boot (1)</li>
<ul id="dc-161" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/115">
<li id="p-115">• vscode에 Spring Boot 개발 세팅 하기</li>
</a>

</ul>

</ul>

</ul>
<li id="dt-2"  onclick="foldNavi('2')">심심한 개발자의 개발 취미 (14)</li>
<ul id="dc-2" class='dc-all' style="display: none;">
<li id="dt-22"  onclick="foldNavi('22')">간단 블로그 만들기 (8)</li>
<ul id="dc-22" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/1">
<li id="p-1">• 블로그 개발 기획, 배포 일지</li>
</a>
<a href="https://ballboyDev.github.io/post/10">
<li id="p-10">• 0. 블로그 만들기 - 시작하며</li>
</a>
<a href="https://ballboyDev.github.io/post/13">
<li id="p-13">• 1. 블로그 만들기 - 폴더 탐색</li>
</a>
<a href="https://ballboyDev.github.io/post/16">
<li id="p-16">• 2. 블로그 만들기 - 마크다운 변환</li>
</a>
<a href="https://ballboyDev.github.io/post/17">
<li id="p-17">• 3. 블로그 만들기 - 리펙토링</li>
</a>
<a href="https://ballboyDev.github.io/post/34">
<li id="p-34">• 1. 블로그 만들기 외전 - 애플 단축어 활용</li>
</a>
<a href="https://ballboyDev.github.io/post/35">
<li id="p-35">• 2. 블로그 만들기 외전 - 외부 빌드 스크립트 만들기</li>
</a>
<a href="https://ballboyDev.github.io/post/71">
<li id="p-71">• 4. 블로그 만들기 - 목차</li>
</a>

</ul>
<li id="dt-23"  onclick="foldNavi('23')">온라인 코딩 테스트 시스템 (6)</li>
<ul id="dc-23" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/92">
<li id="p-92">• 온라인 코딩 테스트 시스템 배포 일지</li>
</a>
<a href="https://ballboyDev.github.io/post/93">
<li id="p-93">• 0. 온코테 시스템 만들기 - 시작하며</li>
</a>
<a href="https://ballboyDev.github.io/post/98">
<li id="p-98">• 1. 온코테 시스템 만들기 - 기초 설계</li>
</a>
<a href="https://ballboyDev.github.io/post/99">
<li id="p-99">• 2. 온코테 시스템 만들기 - Backend</li>
</a>
<a href="https://ballboyDev.github.io/post/100">
<li id="p-100">• 3. 온코테 시스템 만들기 - Storage</li>
</a>
<a href="https://ballboyDev.github.io/post/101">
<li id="p-101">• 4. 온코테 시스템 만들기 - Container</li>
</a>

</ul>
<li id="dt-24"  onclick="foldNavi('24')">로드맵(chart) 제작 (0)</li>
<ul id="dc-24" class='dc-all' style="display: none;">

</ul>
<li id="dt-25"  onclick="foldNavi('25')">바이브 코딩 프로젝트 (0)</li>
<ul id="dc-25" class='dc-all' style="display: none;">

</ul>

</ul>
<li id="dt-3"  onclick="foldNavi('3')">자취생 밥 만들어 먹기 (40)</li>
<ul id="dc-3" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/27">
<li id="p-27">• 내돈 내산 양념/조미료 사용 후기</li>
</a>
<a href="https://ballboyDev.github.io/post/33">
<li id="p-33">• 전자레인지로 밥 짓기</li>
</a>
<a href="https://ballboyDev.github.io/post/91">
<li id="p-91">• 찍어 먹는 양념 만들기</li>
</a>
<li id="dt-31"  onclick="foldNavi('31')">5첩 반상을 위한 밑반찬 (3)</li>
<ul id="dc-31" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/5">
<li id="p-5">• 겉절이 김치</li>
</a>
<a href="https://ballboyDev.github.io/post/7">
<li id="p-7">• 고추다대기</li>
</a>
<a href="https://ballboyDev.github.io/post/11">
<li id="p-11">• 김짱아치</li>
</a>

</ul>
<li id="dt-32"  onclick="foldNavi('32')">밥의 영혼의 단짝 국, 소스 (10)</li>
<ul id="dc-32" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/2">
<li id="p-2">• 미역국</li>
</a>
<a href="https://ballboyDev.github.io/post/4">
<li id="p-4">• 양배추 강된장</li>
</a>
<a href="https://ballboyDev.github.io/post/6">
<li id="p-6">• 진한 카레</li>
</a>
<a href="https://ballboyDev.github.io/post/9">
<li id="p-9">• 계란국</li>
</a>
<a href="https://ballboyDev.github.io/post/14">
<li id="p-14">• 짜장소스</li>
</a>
<a href="https://ballboyDev.github.io/post/74">
<li id="p-74">• 냉이 된장찌개</li>
</a>
<a href="https://ballboyDev.github.io/post/132">
<li id="p-132">• 쯔유 오뎅탕</li>
</a>
<a href="https://ballboyDev.github.io/post/135">
<li id="p-135">• 버섯 스프</li>
</a>
<a href="https://ballboyDev.github.io/post/138">
<li id="p-138">• 된장 술밥</li>
</a>
<a href="https://ballboyDev.github.io/post/150">
<li id="p-150">• 키마 카레</li>
</a>

</ul>
<li id="dt-33"  onclick="foldNavi('33')">삶의 에너지 고기(육식) (9)</li>
<ul id="dc-33" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/8">
<li id="p-8">• 국물 두루치기</li>
</a>
<a href="https://ballboyDev.github.io/post/12">
<li id="p-12">• 삼겹살 덮밥</li>
</a>
<a href="https://ballboyDev.github.io/post/26">
<li id="p-26">• 전자레인지 대패 삼겹살 솥밥</li>
</a>
<a href="https://ballboyDev.github.io/post/30">
<li id="p-30">• 멍게 비빔밥</li>
</a>
<a href="https://ballboyDev.github.io/post/37">
<li id="p-37">• 제육볶음</li>
</a>
<a href="https://ballboyDev.github.io/post/72">
<li id="p-72">• 멍게 무침</li>
</a>
<a href="https://ballboyDev.github.io/post/79">
<li id="p-79">• 닭근위 볶음</li>
</a>
<a href="https://ballboyDev.github.io/post/124">
<li id="p-124">• 깐풍 삼겹살</li>
</a>
<a href="https://ballboyDev.github.io/post/133">
<li id="p-133">• 매운 삼겹살 찜</li>
</a>

</ul>
<li id="dt-34"  onclick="foldNavi('34')">면 러버의 면 사랑 요리 (14)</li>
<ul id="dc-34" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/25">
<li id="p-25">• 내 멋대로 알리오 올리오</li>
</a>
<a href="https://ballboyDev.github.io/post/28">
<li id="p-28">• 라면 요리 - 마요네즈 비빔 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/29">
<li id="p-29">• 들기름 막국수</li>
</a>
<a href="https://ballboyDev.github.io/post/38">
<li id="p-38">• 고추 기름 비빔면</li>
</a>
<a href="https://ballboyDev.github.io/post/70">
<li id="p-70">• 라면 요리 - 마늘 해장 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/76">
<li id="p-76">• 라면 요리 - 대파 해장 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/85">
<li id="p-85">• 라면 요리 - 라면밥</li>
</a>
<a href="https://ballboyDev.github.io/post/87">
<li id="p-87">• 이열치냉 - 냉 미역 국수</li>
</a>
<a href="https://ballboyDev.github.io/post/105">
<li id="p-105">• 이열치냉 - 간단 야식 냉면</li>
</a>
<a href="https://ballboyDev.github.io/post/106">
<li id="p-106">• 라면 요리 - 윤남노 사천 짜파게티</li>
</a>
<a href="https://ballboyDev.github.io/post/121">
<li id="p-121">• 알리오 올리오 에 페퍼론치노</li>
</a>
<a href="https://ballboyDev.github.io/post/134">
<li id="p-134">• 스리라차 나폴리탄 파스타</li>
</a>
<a href="https://ballboyDev.github.io/post/136">
<li id="p-136">• 해물 볶음 우동</li>
</a>
<a href="https://ballboyDev.github.io/post/149">
<li id="p-149">• 된장 파스타</li>
</a>

</ul>
<li id="dt-35"  onclick="foldNavi('35')">출출할때 만들어 먹는 요리 (1)</li>
<ul id="dc-35" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/139">
<li id="p-139">• 감자전</li>
</a>

</ul>

</ul>
<li id="dt-4"  onclick="foldNavi('4')">의식의 흐름대로 (4)</li>
<ul id="dc-4" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/86">
<li id="p-86">• 내돈 내산 심심한 개발자의 데스크 셋업</li>
</a>
<a href="https://ballboyDev.github.io/post/88">
<li id="p-88">• 심심한 개발자의 볼링 취미 볼백 탐방기</li>
</a>
<li id="dt-41"  onclick="foldNavi('41')">일상 회고록 (2)</li>
<ul id="dc-41" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/103">
<li id="p-103">• 2025년 상반기 회고 (ver. ChatGPT)</li>
</a>
<a href="https://ballboyDev.github.io/post/104">
<li id="p-104">• 2025년 상반기 회고</li>
</a>

</ul>

</ul>
<li id="dt-5"  onclick="foldNavi('5')">심심한 개발자의 일상 (1)</li>
<ul id="dc-5" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/137">
<li id="p-137">• 웨일 북마크 복원</li>
</a>

</ul>

                            </ul>
                        </div>

                        <div class="copyright">
                            <img class="img"
                                src="https://ballboyDev.github.io/assets/img/github-mark-white.svg"
                                alt="" srcset="">
                            <a href="https://github.com/BallboyDev/ballboyDev.github.io" target="_blank">Designed by ballboyDev</a>
                        </div>

                    </div>

                    <!-- contents component -->
                    <div id="contents">

                        

                        <div class="bookmark">

            <div class="title t1" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-1"># Multi Container
</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-2">## 파드와 컨테이너의 통신</a></div>
                <p>•</p>
            </div>

            <div class="title t3" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-5">### 파드안 컨테이너간의 데이터 공유 (Volume)</a></div>
                <p>•</p>
            </div>

            <div class="title t3" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-10">### 파드안 컨테이너간의 네트워크 공유</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-17">## 초기화 컨테이너를 이용한 애플리케이션의 시작</a></div>
                <p>•</p>
            </div>

            <div class="title t3" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-22">### 초기화 컨테이너를 활용한 애플리케이션 컨테이너 설정 파일 구성</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-28">## 어댑터 컨테이너를 이용한 일관성 있는 애플리케이션 관리</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-31">## 외부와의 통신을 추상화하기: 앰배서더 컨테이너</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-34">## 파드 환경 이해하기</a></div>
                <p>•</p>
            </div>

            <div class="title t3" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-37">### shareProcessNamespace: true</a></div>
                <p>•</p>
            </div></div>
                        
                        
            <a href="https://ballboyDev.github.io/post/144.html" class="prev post">
                <img src="https://ballboyDev.github.io/assets/img/prev.svg" alt="" srcset="">
            </a>
                        
                        
            <a href="https://ballboyDev.github.io/post/146.html" class="next post">
                <img src="https://ballboyDev.github.io/assets/img/next.svg" alt="" srcset="">
            </a>
                        
                        <div class="main markdown-body">

                            <h1 id="bm-1">Multi Container</h1>
<h2 id="bm-2">파드와 컨테이너의 통신</h2>
<ul>
<li>파드는 하나 이상의 컨테이너가 공유하는 네트워크 및 파일 시스템을 제공하는 가상 환경이다. 각각의 컨테이너는 별도의 환경 변수와 자신만의 프로세스를 가지며, 서로 다른 기술 스택으로 구성된 별개의 이미지를 사용할 수 있는 독립된 단위다. 반면 파드는 한 노드상에서 동작하는 하나의 단위다. 따라서 파드에 속한 컨테이너는 모두 같은 노드에서 동작한다.</li>
</ul>
<h3 id="bm-5">파드안 컨테이너간의 데이터 공유 (Volume)</h3>
<ul>
<li>같은 파드 안에 있는 컨테이너는 네트워크를 공유한다. 따라서 모든 컨테이너가 같은 IP 주소(파드의 IP 주소)를 갖는다. 파드 속 컨테이너는 외부 트래픽을 받을 수 있지만 각기 다른 포트를 주시해야 한다. 그리고 같은 파드 속 컨테이너 간 통신에는 localhost 주소를 사용한다.</li>
<li>컨테이너는 자신만의 파일 시스템을 갖니만 파드에서 제공하는 볼륨을 마운트할 수 있으며, 이 볼륨을 공유하는 방식으로 컨테이너끼리 정보를 교환할 수 있다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-yaml"><span class="hljs-comment"># 한 파드안에 두개의 컨테이너를 띄우는 디플로이먼트 정의</span>

<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">containers:</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">sleep</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image1</span>
      <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data-rw</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">file-reader</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image1</span>
      <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data-ro</span>
          <span class="hljs-attr">readOnly:</span> <span class="hljs-literal">true</span>

  <span class="hljs-attr">volumes:</span>
    <span class="hljs-comment"># 파드에 생성 공유된 볼륨을 통해 두 컨테이너 간의 데이터 공유가 가능해진다.</span>
    <span class="hljs-comment"># 볼륨 마운트시 데이터 접근 권한을 통해 파일의 읽기, 쓰기 등의 제한을 걸수 있다.</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
      <span class="hljs-attr">emptyDir:</span> {}</code></pre><h3 id="bm-10">파드안 컨테이너간의 네트워크 공유</h3>
<ul>
<li>네트워크는 컨테이너마다 각기 다른 포트를 나누어 쓰는 형태로 공유된다. 이런 기능은 애플리케이션이 백그라운드로 돌아가며 진행 사항을 외부에 알리는 기능이 없는 상황에 유용하다. 파드 속 다른 컨테이너가 REST API를 통해 애플리케이션 컨테이너의 상태를 보고하는 형태가 된다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-yaml"><span class="hljs-comment"># 한 파드 안에 네트워크를 통한 통신</span>

<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">containers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app-1</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app-2</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image</span>
      <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">8080</span>

<span class="hljs-comment"># app-1 컨테이너에서 wget 명령어를 통한 동일 네트워크의 8080 포트를 사용하는 app-2 컨테이너로 네트워크 통신 테스트</span>
<span class="hljs-comment"># kubectl exec deploy/[deploy-name] -c app-1 -- wget -q -0 -- localhost:8080</span></code></pre><ul>
<li><p>파드는 클러스터상의 IP 주소를 갖고 있다. 파드 속 컨테이너가 어떤 포트를 주시하고 있다면, 다른 파드가 이 포트로 접근할 수 있다. 트래픽을 파드의 특정 포트로 전달하는 서비스를 만들면 이 포트를 주시하는 컨테이너가 요청을 전달 받는다.</p>
<ul>
<li><code style="color: #ffbc36">kubectl expose -f template.yaml --type=LoadBalancer --port=8020 --target-port=8080</code></li>
</ul>
</li>
<li><p>파드는 애플리케이션을 구성하는 한 단위다. 파드는 애플리케이션의 단일 컴포넌트에 대응해야 한다. 애플리케이션 컨테이너를 지원하는 컨테이너를 파드에 추가할 수는 있지만, 한 파드 안에 서로 다른 애플리케이션을 함께 넣어서는 안된다. 이런 구성을 취하면 각각의 컴포넌트를 독립적으로 업데이트 또는 스케일링하거나 관리할 수 없게 된다.</p>
</li>
</ul>
<h2 id="bm-17">초기화 컨테이너를 이용한 애플리케이션의 시작</h2>
<ul>
<li>모든 컨테이너가 병렬로 실행되는 기본 형태의 멀티컨테이너 파드는 파드의 모든 컨테이너가 동시에 실행되며 모든 컨테이너의 상태가 Ready가 되어야 파드 역시 준비된 것으로 최급된다.</li>
<li><code style="color: #ffbc36">사이드카 패턴</code> 이란, 보조 컨테이너가 메인(애플리케이션) 컨테이너를 지원하는 구도를 일컫는다. </li>
<li>또한 메인(애플리케이션) 컨테이너보다 보조 컨테이너를 먼저 실행하여 애플리케이션 실행 준비를 하는 경우도 있는데 이런 추가 컨테이너를 <code style="color: #ffbc36">초기화 컨테이너</code>라고 한다.</li>
<li>초기화 컨테이너는 파드 안에 여러개 정의할 수 있으며, 파드 정의에 기재된 순서대로 실행된다. 또한 각각의 초기화 컨테이너는 정해진 목표를 달성해야 다음 초기화 컨테이너를 실행한다. 그리고 모든 초기화 컨테이너가 목표를 달성해야 애플리케이션 컨테이너나 사이드카 컨테이너를 실행한다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-yaml"><span class="hljs-comment"># 디플로이먼트의 template 필드에 정의된 파드</span>
<span class="hljs-attr">spec:</span>

  <span class="hljs-comment"># 초기화 컨테이너는 배열 형태로 기재되며 나열된 순서대로 실행</span>
  <span class="hljs-attr">initContainers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">init-html</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image</span>
      <span class="hljs-attr">command:</span> [<span class="hljs-string">&#x27;sh&#x27;</span>, <span class="hljs-string">&#x27;-c&#x27;</span>, <span class="hljs-string">&quot;echo &#x27;&lt;!DOCTYPE html...&#x27; &gt; /data/index.html&quot;</span>]
      <span class="hljs-comment"># command: [&#x27;git&#x27;, &#x27;clone&#x27;, ...]</span>
      <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">data</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data</span></code></pre><h3 id="bm-22">초기화 컨테이너를 활용한 애플리케이션 컨테이너 설정 파일 구성</h3>
<ul>
<li>초기화 컨테이너를 활용하면 애플리케이션 컨테이너가 컨피그맵이나 환경 변수를 직접 사용하지 않더라도 컨피그맵과 환경 변수에 설정된 설정값에 따라 애플리케이션 동작이 변화한다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-yaml"><span class="hljs-comment"># 초기화 컨테이너를 통해 애플리케이션 컨테이너의 설정파일을 구성하는 Deployment.yaml</span>

<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">initContainers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">init-config</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">init-container-image</span>
      <span class="hljs-attr">command:</span> [<span class="hljs-string">...환경변수와</span> <span class="hljs-string">컨피그</span> <span class="hljs-string">맵을</span> <span class="hljs-string">통해</span> <span class="hljs-string">전달</span> <span class="hljs-string">받은</span> <span class="hljs-string">데이터를</span> <span class="hljs-string">통합하여</span> <span class="hljs-string">&#x27;config-dir&#x27;</span><span class="hljs-string">경로에</span> <span class="hljs-string">저장</span> <span class="hljs-string">명령</span> <span class="hljs-string">작성</span>]
      <span class="hljs-attr">env:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">APP_ENVIRONMENT</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">TEST</span>
      <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-map</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/config-in</span>

        <span class="hljs-comment"># 환경 설정과 컨피그맵의 데이터를 통합하여 저장하는 경로</span>
        <span class="hljs-comment"># 애플리케이션 컨테이너에서 해당 경로의 설정파일을 기반으로 애플리케이션을 실행한다.</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-dir</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/config-out</span>
  <span class="hljs-attr">containers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">application-container</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">application-container-image</span>
      <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-dir</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/config</span>
          <span class="hljs-attr">readOnly:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">volumes:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-map</span>
      <span class="hljs-attr">configMap:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">configMap-name</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">config-dir</span>
      <span class="hljs-attr">emptyDir:</span> {}</code></pre><ol>
<li>초기화 컨테이너에서 컨피그맵, 비밀값, 환경 변수 등의 볼륨 마운트에서 설정을 읽은 후 환경 변수의 설정값을 병합하여 구성한 설정을 공디렉토리 볼륨 마운트에 파일로 기록한다.</li>
<li>애플리케이션 컨테이너는 설정 파일이 기록된 공 디렉토리 볼륨을 설정 파일 경로에 마운트 한다. 초기화 컨테이너가 기록한 설정 파일이 이미지에 포함된 설정 파일을 가린다.</li>
<li>컨테이너는 환경 변수를 공유하지 않는다. 애플리케이션 컨테이너는 초기화 컨테이너에 지정된 설정값을 볼 수 없다.</li>
</ol>
<h2 id="bm-28">어댑터 컨테이너를 이용한 일관성 있는 애플리케이션 관리</h2>
<ul>
<li>어댑터 컨테이너는 애플리케이션과 컨테이너 플랫폼 사이를 중재하는 어댑터 역할로 기존 애플리케이션 컨테이너의 출력이나 인터페이스를 수정하여 다른 시스템의 요구사항에 맞게 적응 시켜주는 역할을 하는 보조 컨테이너로 <code style="color: #ffbc36">사이드카 패턴</code>의 한 종류로 메인 컨테이너와 동일한 파드에서 실행된다.</li>
<li>핵심은 기존 애플리케이션의 코드를 전혀 변경하지 않고도 연동 표준을 맞출 수 있다는 점이다.</li>
</ul>
<h2 id="bm-31">외부와의 통신을 추상화하기: 앰배서더 컨테이너</h2>
<ul>
<li><p><code style="color: #ffbc36">앰배서더 컨테이너</code>는 애플리케이션과 외부와의 통신을 제어하고 단순화하는 역할을 한다. 애플리케이션이 localhost 주소로 네트워크 요청을 전달하면 이 요청을 앰배서더 컨테이너가 받아 처리하는 형태이다.</p>
</li>
<li><p><code style="color: #ffbc36">서비스 메시 아키텍처</code>는 마이크로 서비스 아키텍처(MSA)에서 서비스 간의 통신을 처기하기 위해 만들어진 <code style="color: #ffbc36">전용 인프라 계층</code>이다. 애플리케이션 코드 변경 없이 서비스 간의 통신을 안정적이고, 빠르고, 안전하게 만들고, 통신 상태를 쉽게 파악할 수 있도록 지원한다.</p>
<ul>
<li>가장 큰 특징은 애플리케이션의 비즈니스 로직과 통신 관련 기능(네트워크 로직)을 완전히 분리하는 것이다.</li>
</ul>
</li>
<li><p>앰배서더 컨테이너는 파드 외부로 나가는 HTTP 요청의 프록시 역할을 한다. 또한 앰배서더 컨테이너를 네트워크 전송 계층에 끼워넣으면 어떤한 유형의 트래픽이라도 처리할 수 있다. 데이터베이스 앰배서더 컨테이너는 읽기 쿼리 전용인 데이터 베이스 복제본으로 보내고, 쓰기 쿼리는 마스터 데이터 베이스로 보낼 수 도 있다.</p>
</li>
<li><p>애플리케이션 로직을 수정하지 않고 성능과 스케일리 모두를 달성할 수 있다.</p>
</li>
</ul>
<h2 id="bm-34">파드 환경 이해하기</h2>
<ul>
<li><p>파드는 하나 이상의 컨테이너를 감싸는 경계다. 마찬가지로 컨테이너는 하나 이상의 프로세스를 감싸는 경계이다. 파드는 오버헤드 없이 가상화 계층을 추가하므로 유연하고 효율이 뛰어나다. 다만 이런 유연성의 대가는 복잡도의 상승이다. 따라서 멀티컨테이너 파드를 사용할 때는 아키텍처와 파드 구성에 주의 해야 한다.</p>
</li>
<li><p>파드의 생성 단계에서는 사이드카 컨테이너 (초기화 / 어댑터 / 앰배서더 컨테이너) 역시 애플리케이션 컨테이너와 동일하게 취급한다. 파드는 모든 컨테이너의 상태가 Running이 되지 못해 준비 상태로 넘어가지 못하며, 디플로이먼트는 멀티컨테이너 파드의 초기화 컨테이너가 무사히 종료되고 파드 컨테이너가 모두 Running 상태가 되기를 기다린다. </p>
<ul>
<li>초기화 컨테이너를 가진 파드가 대체될 때 새 파드는 초기화 컨테이너를 모두 실행한다. 따라서 초기화 로직은 반복적으로 실행 할 수 있는 것이어야 한다.</li>
<li>초기화 컨테이너의 이미지를 변경하면 파드 자체를 재시작한다. <code style="color: #ffbc36">초기화 컨테이너는 다시 한번 실행되며, 애플리케이션 컨테이너도 모두 교체된다.</code></li>
<li>파드 정의에서 애플리케이션 컨테이너의 이미지를 변경하면 애플리케이션 컨테이너가 대체된다. <code style="color: #ffbc36">초기화 컨테이너는 재시작하지 않는다.</code></li>
<li>애플리케이션 컨테이너가 종료되면 파드가 애플리케이션 컨테이너를 재생성한다. 대체 컨테이너가 준비될 때까지 파드는 완전한 동작 상태가 아니게 되며, 서비스에서 트래픽을 전달받지 못한다.</li>
</ul>
</li>
</ul>
<h3 id="bm-37">shareProcessNamespace: true</h3>
<ul>
<li>파드는 단일한 컴퓨팅 환경으로, 파드 속 컨테이너는 네트워크 주소와 파일 시스템의 일부를 공유할 수 있다. 하지만 컨테이너 경계를 넘어 서로의 프로세스에는 접근할 수 없다. 하지만 간혹 프로세스 간 통신이나 애플리케이션 프로세스의 지표를 수집할 때 처럼 사이드카 컨테이너가 애플리케이션 프로세스에 접근해야 할 때가 있다. 이런 경우 파드 정의에 <code style="color: #ffbc36">shareProcessNamespace: true</code> 설정을 추가하면 이런 접근이 가능해진다. 파드의 모든 컨테이너가 컴퓨팅 공간을 공유하며 서로의 프로세스를 볼 수 있게 된다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-yaml"><span class="hljs-attr">spec:</span>
  <span class="hljs-attr">shareProcessNamespace:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">containers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">container-name1</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image-1</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">container-name2</span>
      <span class="hljs-attr">image:</span> <span class="hljs-string">container-image-2</span></code></pre>

                        </div>

                        
            <script src="https://utteranc.es/client.js"
                repo="ballboyDev/personal-storage"
                issue-term="pathname"
                label="comments"
                theme="github-dark"
                crossorigin="anonymous"
                async>
            </script>

                    </div>
                </div>
            </body>
            </html>