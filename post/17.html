
            <!DOCTYPE html>
            <html lang="en">

            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="google-site-verification" content="jrh7qB1kgowvnvE0P3KqlhI-iNmw9CvGJF4dQsaCTAk" />
                <meta name="naver-site-verification" content="6fe49ccdb8613221b89ae2d580300c63a91af446" />
                
                
            <link rel="icon" href="https://ballboyDev.github.io/assets/img/bDev.ico">
            <link rel="stylesheet" href="https://ballboyDev.github.io/assets/markdown.css">
            <link rel="stylesheet" href="https://ballboyDev.github.io/assets/skin.css">

            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/atom-one-dark.min.css">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>

            <style>
                #p-17 {
                    color: rgb(76, 193, 237) !important;
                }
            </style>
            <script id="data" type="application/json">{ "fold": ["2","22"] }</script>

            <script src="https://ballboyDev.github.io/assets/skin.js"></script>
            <script src="https://ballboyDev.github.io/assets/env.js"></script>
            

                <title>3. 블로그 만들기 - 리펙토링</title>
            </head>

            <body>
                <div id="wrapper">
                    <!-- side bar component -->
                    <div id="head-bar">
                        <img id="openNavi" class="menu"
                            src="https://ballboyDev.github.io/assets/img/menu.svg"
                            alt="" srcset="">
                        <div class="title">심심한 개발자의 취미생활</div>
                        <img class="img"
                            src="https://ballboyDev.github.io/assets/img/profile.jpeg"
                            alt="" srcset="">
                    </div>
                    <div id="side-bar">
                        <img id="closeNavi" class="close"
                            src="https://ballboyDev.github.io/assets/img/close.svg"
                            alt="" srcset="">
                        <div class="profile">
                            <img class="img" src="https://ballboyDev.github.io/assets/img/profile.jpeg" alt="" srcset="">
                            <p>심심한 개발자의 취미생활</p>
                        </div>
                        <hr />
                        <h3 class="home"><a href="https://ballboyDev.github.io">HOME</a></h3>
                        <hr />
                        
                        <h3 class="category" onclick="foldNavi()">카테고리</h3>
                        <div class="navi">
                            <ul class="root">

                                <li id="dt-1"  onclick="foldNavi('1')">심심한 개발자의 개발 공부 (52)</li>
<ul id="dc-1" class='dc-all' style="display: block;">
<a href="https://ballboyDev.github.io/post/108">
<li id="p-108">• Backend 학습 로드맵</li>
</a>
<li id="dt-11"  onclick="foldNavi('11')">개발 정보 정리 (13)</li>
<ul id="dc-11" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/3">
<li id="p-3">• vim 에디터 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/31">
<li id="p-31">• json객체와 Map()의 비교</li>
</a>
<a href="https://ballboyDev.github.io/post/32">
<li id="p-32">• 배열 생성 성능 비교</li>
</a>
<a href="https://ballboyDev.github.io/post/36">
<li id="p-36">• console 객체 활용하기</li>
</a>
<a href="https://ballboyDev.github.io/post/58">
<li id="p-58">• 자주쓰는 git/git-flow 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/69">
<li id="p-69">• curl 명령어 사용법 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/73">
<li id="p-73">• node 내장 객체와 내장 모듈 사용하기</li>
</a>
<a href="https://ballboyDev.github.io/post/80">
<li id="p-80">• 터미널 이미지 형식 변환(sips)</li>
</a>
<a href="https://ballboyDev.github.io/post/107">
<li id="p-107">• Shell Script 기초 문법 정리</li>
</a>
<a href="https://ballboyDev.github.io/post/116">
<li id="p-116">• Cookie, Session, JWT, OAuth 개념</li>
</a>
<a href="https://ballboyDev.github.io/post/152">
<li id="p-152">• 네트워크</li>
</a>
<a href="https://ballboyDev.github.io/post/153">
<li id="p-153">• DNS (Domain Name Service)</li>
</a>
<a href="https://ballboyDev.github.io/post/154">
<li id="p-154">• CDN (Contents Deliver Network)</li>
</a>

</ul>
<li id="dt-12"  onclick="foldNavi('12')">svelte, sveltekit (13)</li>
<ul id="dc-12" class='dc-all' style="display: none;">
<li id="dt-121"  onclick="foldNavi('121')">svelte (8)</li>
<ul id="dc-121" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/18">
<li id="p-18">• svelte Basic</li>
</a>
<a href="https://ballboyDev.github.io/post/19">
<li id="p-19">• svelte 속성</li>
</a>
<a href="https://ballboyDev.github.io/post/20">
<li id="p-20">• life cycle</li>
</a>
<a href="https://ballboyDev.github.io/post/21">
<li id="p-21">• runes</li>
</a>
<a href="https://ballboyDev.github.io/post/22">
<li id="p-22">• template Syntax</li>
</a>
<a href="https://ballboyDev.github.io/post/23">
<li id="p-23">• Directive</li>
</a>
<a href="https://ballboyDev.github.io/post/24">
<li id="p-24">• Runtime</li>
</a>
<a href="https://ballboyDev.github.io/post/68">
<li id="p-68">• setting svelte.config.js</li>
</a>

</ul>
<li id="dt-122"  onclick="foldNavi('122')">sveltekit (5)</li>
<ul id="dc-122" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/117">
<li id="p-117">• sveltekit 기본구조</li>
</a>
<a href="https://ballboyDev.github.io/post/118">
<li id="p-118">• 파일 시스템 기반 라우팅</li>
</a>
<a href="https://ballboyDev.github.io/post/119">
<li id="p-119">• 데이터 로드</li>
</a>
<a href="https://ballboyDev.github.io/post/120">
<li id="p-120">• sveltekit API 요청</li>
</a>
<a href="https://ballboyDev.github.io/post/122">
<li id="p-122">• 폼 액션</li>
</a>

</ul>

</ul>
<li id="dt-13"  onclick="foldNavi('13')">Infra (18)</li>
<ul id="dc-13" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/151">
<li id="p-151">• app, docker, kubernetes 인프라 환경의 포트 설정</li>
</a>
<li id="dt-131"  onclick="foldNavi('131')">Docker (9)</li>
<ul id="dc-131" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/77">
<li id="p-77">• docker mariadb setting</li>
</a>
<a href="https://ballboyDev.github.io/post/78">
<li id="p-78">• docker mongodb setting</li>
</a>
<a href="https://ballboyDev.github.io/post/89">
<li id="p-89">• docker network, volume</li>
</a>
<a href="https://ballboyDev.github.io/post/90">
<li id="p-90">• docker compose</li>
</a>
<a href="https://ballboyDev.github.io/post/94">
<li id="p-94">• docker 경량 컨테이너 베이스</li>
</a>
<li id="dt-1311"  onclick="foldNavi('1311')">Docker 기본 명령어 정리 (4)</li>
<ul id="dc-1311" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/81">
<li id="p-81">• Docker image 관련 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/82">
<li id="p-82">• Docker container 관련 명령어</li>
</a>
<a href="https://ballboyDev.github.io/post/83">
<li id="p-83">• Docker run 명령어 관련 옵션</li>
</a>
<a href="https://ballboyDev.github.io/post/84">
<li id="p-84">• Dockerfile 명령어 정리</li>
</a>

</ul>

</ul>
<li id="dt-132"  onclick="foldNavi('132')">Kubernetes (8)</li>
<ul id="dc-132" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/141">
<li id="p-141">• 1. Pod, Deployment, Service</li>
</a>
<a href="https://ballboyDev.github.io/post/142">
<li id="p-142">• 2. ConfigMap, Secret</li>
</a>
<a href="https://ballboyDev.github.io/post/143">
<li id="p-143">• 3. Volume, Mount, Clame</li>
</a>
<a href="https://ballboyDev.github.io/post/144">
<li id="p-144">• 4. Scailing, Replicaset</li>
</a>
<a href="https://ballboyDev.github.io/post/145">
<li id="p-145">• 5. Multi Container</li>
</a>
<a href="https://ballboyDev.github.io/post/146">
<li id="p-146">• 6. StatefulSet, Job, ClonJob</li>
</a>
<a href="https://ballboyDev.github.io/post/147">
<li id="p-147">• 7. RollOut, RollBack</li>
</a>
<a href="https://ballboyDev.github.io/post/148">
<li id="p-148">• 8. Helm</li>
</a>

</ul>

</ul>
<li id="dt-14"  onclick="foldNavi('14')">NestJS (6)</li>
<ul id="dc-14" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/125">
<li id="p-125">• NestJS</li>
</a>
<a href="https://ballboyDev.github.io/post/126">
<li id="p-126">• Controller</li>
</a>
<a href="https://ballboyDev.github.io/post/128">
<li id="p-128">• Provider</li>
</a>
<a href="https://ballboyDev.github.io/post/129">
<li id="p-129">• Module</li>
</a>
<a href="https://ballboyDev.github.io/post/130">
<li id="p-130">• Middleware</li>
</a>
<a href="https://ballboyDev.github.io/post/131">
<li id="p-131">• ExceptionFilter</li>
</a>

</ul>
<li id="dt-16"  onclick="foldNavi('16')">Spring (1)</li>
<ul id="dc-16" class='dc-all' style="display: none;">
<li id="dt-161"  onclick="foldNavi('161')">Spring Boot (1)</li>
<ul id="dc-161" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/115">
<li id="p-115">• vscode에 Spring Boot 개발 세팅 하기</li>
</a>

</ul>

</ul>

</ul>
<li id="dt-2"  onclick="foldNavi('2')">심심한 개발자의 개발 취미 (14)</li>
<ul id="dc-2" class='dc-all' style="display: none;">
<li id="dt-22"  onclick="foldNavi('22')">간단 블로그 만들기 (8)</li>
<ul id="dc-22" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/1">
<li id="p-1">• 블로그 개발 기획, 배포 일지</li>
</a>
<a href="https://ballboyDev.github.io/post/10">
<li id="p-10">• 0. 블로그 만들기 - 시작하며</li>
</a>
<a href="https://ballboyDev.github.io/post/13">
<li id="p-13">• 1. 블로그 만들기 - 폴더 탐색</li>
</a>
<a href="https://ballboyDev.github.io/post/16">
<li id="p-16">• 2. 블로그 만들기 - 마크다운 변환</li>
</a>
<a href="https://ballboyDev.github.io/post/17">
<li id="p-17">• 3. 블로그 만들기 - 리펙토링</li>
</a>
<a href="https://ballboyDev.github.io/post/34">
<li id="p-34">• 1. 블로그 만들기 외전 - 애플 단축어 활용</li>
</a>
<a href="https://ballboyDev.github.io/post/35">
<li id="p-35">• 2. 블로그 만들기 외전 - 외부 빌드 스크립트 만들기</li>
</a>
<a href="https://ballboyDev.github.io/post/71">
<li id="p-71">• 4. 블로그 만들기 - 목차</li>
</a>

</ul>
<li id="dt-23"  onclick="foldNavi('23')">온라인 코딩 테스트 시스템 (6)</li>
<ul id="dc-23" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/92">
<li id="p-92">• 온라인 코딩 테스트 시스템 배포 일지</li>
</a>
<a href="https://ballboyDev.github.io/post/93">
<li id="p-93">• 0. 온코테 시스템 만들기 - 시작하며</li>
</a>
<a href="https://ballboyDev.github.io/post/98">
<li id="p-98">• 1. 온코테 시스템 만들기 - 기초 설계</li>
</a>
<a href="https://ballboyDev.github.io/post/99">
<li id="p-99">• 2. 온코테 시스템 만들기 - Backend</li>
</a>
<a href="https://ballboyDev.github.io/post/100">
<li id="p-100">• 3. 온코테 시스템 만들기 - Storage</li>
</a>
<a href="https://ballboyDev.github.io/post/101">
<li id="p-101">• 4. 온코테 시스템 만들기 - Container</li>
</a>

</ul>
<li id="dt-24"  onclick="foldNavi('24')">로드맵(chart) 제작 (0)</li>
<ul id="dc-24" class='dc-all' style="display: none;">

</ul>
<li id="dt-25"  onclick="foldNavi('25')">바이브 코딩 프로젝트 (0)</li>
<ul id="dc-25" class='dc-all' style="display: none;">

</ul>

</ul>
<li id="dt-3"  onclick="foldNavi('3')">자취생 밥 만들어 먹기 (40)</li>
<ul id="dc-3" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/27">
<li id="p-27">• 내돈 내산 양념/조미료 사용 후기</li>
</a>
<a href="https://ballboyDev.github.io/post/33">
<li id="p-33">• 전자레인지로 밥 짓기</li>
</a>
<a href="https://ballboyDev.github.io/post/91">
<li id="p-91">• 찍어 먹는 양념 만들기</li>
</a>
<li id="dt-31"  onclick="foldNavi('31')">5첩 반상을 위한 밑반찬 (3)</li>
<ul id="dc-31" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/5">
<li id="p-5">• 겉절이 김치</li>
</a>
<a href="https://ballboyDev.github.io/post/7">
<li id="p-7">• 고추다대기</li>
</a>
<a href="https://ballboyDev.github.io/post/11">
<li id="p-11">• 김짱아치</li>
</a>

</ul>
<li id="dt-32"  onclick="foldNavi('32')">밥의 영혼의 단짝 국, 소스 (10)</li>
<ul id="dc-32" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/2">
<li id="p-2">• 미역국</li>
</a>
<a href="https://ballboyDev.github.io/post/4">
<li id="p-4">• 양배추 강된장</li>
</a>
<a href="https://ballboyDev.github.io/post/6">
<li id="p-6">• 진한 카레</li>
</a>
<a href="https://ballboyDev.github.io/post/9">
<li id="p-9">• 계란국</li>
</a>
<a href="https://ballboyDev.github.io/post/14">
<li id="p-14">• 짜장소스</li>
</a>
<a href="https://ballboyDev.github.io/post/74">
<li id="p-74">• 냉이 된장찌개</li>
</a>
<a href="https://ballboyDev.github.io/post/132">
<li id="p-132">• 쯔유 오뎅탕</li>
</a>
<a href="https://ballboyDev.github.io/post/135">
<li id="p-135">• 버섯 스프</li>
</a>
<a href="https://ballboyDev.github.io/post/138">
<li id="p-138">• 된장 술밥</li>
</a>
<a href="https://ballboyDev.github.io/post/150">
<li id="p-150">• 키마 카레</li>
</a>

</ul>
<li id="dt-33"  onclick="foldNavi('33')">삶의 에너지 고기(육식) (9)</li>
<ul id="dc-33" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/8">
<li id="p-8">• 국물 두루치기</li>
</a>
<a href="https://ballboyDev.github.io/post/12">
<li id="p-12">• 삼겹살 덮밥</li>
</a>
<a href="https://ballboyDev.github.io/post/26">
<li id="p-26">• 전자레인지 대패 삼겹살 솥밥</li>
</a>
<a href="https://ballboyDev.github.io/post/30">
<li id="p-30">• 멍게 비빔밥</li>
</a>
<a href="https://ballboyDev.github.io/post/37">
<li id="p-37">• 제육볶음</li>
</a>
<a href="https://ballboyDev.github.io/post/72">
<li id="p-72">• 멍게 무침</li>
</a>
<a href="https://ballboyDev.github.io/post/79">
<li id="p-79">• 닭근위 볶음</li>
</a>
<a href="https://ballboyDev.github.io/post/124">
<li id="p-124">• 깐풍 삼겹살</li>
</a>
<a href="https://ballboyDev.github.io/post/133">
<li id="p-133">• 매운 삼겹살 찜</li>
</a>

</ul>
<li id="dt-34"  onclick="foldNavi('34')">면 러버의 면 사랑 요리 (14)</li>
<ul id="dc-34" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/25">
<li id="p-25">• 내 멋대로 알리오 올리오</li>
</a>
<a href="https://ballboyDev.github.io/post/28">
<li id="p-28">• 라면 요리 - 마요네즈 비빔 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/29">
<li id="p-29">• 들기름 막국수</li>
</a>
<a href="https://ballboyDev.github.io/post/38">
<li id="p-38">• 고추 기름 비빔면</li>
</a>
<a href="https://ballboyDev.github.io/post/70">
<li id="p-70">• 라면 요리 - 마늘 해장 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/76">
<li id="p-76">• 라면 요리 - 대파 해장 라면</li>
</a>
<a href="https://ballboyDev.github.io/post/85">
<li id="p-85">• 라면 요리 - 라면밥</li>
</a>
<a href="https://ballboyDev.github.io/post/87">
<li id="p-87">• 이열치냉 - 냉 미역 국수</li>
</a>
<a href="https://ballboyDev.github.io/post/105">
<li id="p-105">• 이열치냉 - 간단 야식 냉면</li>
</a>
<a href="https://ballboyDev.github.io/post/106">
<li id="p-106">• 라면 요리 - 윤남노 사천 짜파게티</li>
</a>
<a href="https://ballboyDev.github.io/post/121">
<li id="p-121">• 알리오 올리오 에 페퍼론치노</li>
</a>
<a href="https://ballboyDev.github.io/post/134">
<li id="p-134">• 스리라차 나폴리탄 파스타</li>
</a>
<a href="https://ballboyDev.github.io/post/136">
<li id="p-136">• 해물 볶음 우동</li>
</a>
<a href="https://ballboyDev.github.io/post/149">
<li id="p-149">• 된장 파스타</li>
</a>

</ul>
<li id="dt-35"  onclick="foldNavi('35')">출출할때 만들어 먹는 요리 (1)</li>
<ul id="dc-35" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/139">
<li id="p-139">• 감자전</li>
</a>

</ul>

</ul>
<li id="dt-4"  onclick="foldNavi('4')">의식의 흐름대로 (4)</li>
<ul id="dc-4" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/86">
<li id="p-86">• 내돈 내산 심심한 개발자의 데스크 셋업</li>
</a>
<a href="https://ballboyDev.github.io/post/88">
<li id="p-88">• 심심한 개발자의 볼링 취미 볼백 탐방기</li>
</a>
<li id="dt-41"  onclick="foldNavi('41')">일상 회고록 (2)</li>
<ul id="dc-41" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/103">
<li id="p-103">• 2025년 상반기 회고 (ver. ChatGPT)</li>
</a>
<a href="https://ballboyDev.github.io/post/104">
<li id="p-104">• 2025년 상반기 회고</li>
</a>

</ul>

</ul>
<li id="dt-5"  onclick="foldNavi('5')">심심한 개발자의 일상 (1)</li>
<ul id="dc-5" class='dc-all' style="display: none;">
<a href="https://ballboyDev.github.io/post/137">
<li id="p-137">• 웨일 북마크 복원</li>
</a>

</ul>

                            </ul>
                        </div>

                        <div class="copyright">
                            <img class="img"
                                src="https://ballboyDev.github.io/assets/img/github-mark-white.svg"
                                alt="" srcset="">
                            <a href="https://github.com/BallboyDev/ballboyDev.github.io" target="_blank">Designed by ballboyDev</a>
                        </div>

                    </div>

                    <!-- contents component -->
                    <div id="contents">

                        

                        <div class="bookmark">

            <div class="title t1" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-1"># 3. 블로그 만들기 - 리펙토링</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-4">## 핵심 데이터 기준의 작동</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-9">## 레이아웃 세분화</a></div>
                <p>•</p>
            </div>

            <div class="title t2" style="display: flex;">
                <div style="display:flex;align-items: center;"><a style="text-decoration: none;" href="#bm-14">## 포스팅 파일 데이터 관리 방법 - gray-matter</a></div>
                <p>•</p>
            </div></div>
                        
                        
            <a href="https://ballboyDev.github.io/post/16.html" class="prev post">
                <img src="https://ballboyDev.github.io/assets/img/prev.svg" alt="" srcset="">
            </a>
                        
                        
            <a href="https://ballboyDev.github.io/post/71.html" class="next post">
                <img src="https://ballboyDev.github.io/assets/img/next.svg" alt="" srcset="">
            </a>
                        
                        <div class="main markdown-body">

                            <h1 id="bm-1">3. 블로그 만들기 - 리펙토링</h1>
<p>블로그를 만들기 시작한지 한달 정도 지났다.
평소 생각하던 디자인과 기능, 로직을 작성하고 개선하고 포스팅글을 적다보니 여러 부족하고 개선하고 싶은 부분들이 자꾸 눈에 밟혔다.
그래서 추가적인 기능 개선을 할려고 보니 흔히 말하는 클린코드, 모듈화에 대하여 많이 부족하다고 느껴졌다. 그래서 지금까지의 기능을 포괄하도록 새로운 코드로 앞으로의 개선을 위한 리팩토링을 진행하였다.</p>
<h2 id="bm-4">핵심 데이터 기준의 작동</h2>
<ul>
<li>우선 리팩토링의 가장 핵심은 핵심 데이터의 존재이다.
구 버전에서는 네비게이션, 포스팅 페이지를 제작할때마다 파일 탐색을 진행하며 파일에 작성되어 있는 데이터를 읽어 들이는 작업을 진행하였다. 이러한 방식은 로직이 간편하다는 장점이 있지만 성능상의 이슈가 우려되고 개선 작업이 추가될때마다 네비게이션과 포스팅 페이지 작성 로직을 모두 수정해야 되는 단점이 있었다.
다양한 기능과 로직이 추가될수록 두 곳에서의 로직을 수정해야하는데 분석에 들어가는 시간이 늘어가기에 로직 수정의 필요성을 느끼게 되었다.</li>
<li>핵심 데이터는 위와 같은 이슈를 해결하기위 최초 1회 파일 탐색을 수행하며 필요한 데이터를 모두 포함하는 JSON 기반의 데이터 트리를 제작하고 이러한 데이터를 기반으로 네비게이션과 포스팅 페이지를 제작하는 방식이다.
기능이 추가되고 수정작업이 진행되며 필요한 데이터가 추가될시 JSON 데이터를 생성할때 추가하여 로직간의 충돌을 최소화 하게 되었다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">recursion</span> = (<span class="hljs-params">root, fold = []</span>) =&gt; {
    <span class="hljs-keyword">const</span> temp = {}

    <span class="hljs-comment">// ballboy / index 파일과 공통 파일들의 관리 방안에 대하여 고민해보기</span>
    <span class="hljs-keyword">const</span> post = fs.<span class="hljs-title function_">readdirSync</span>(root).<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> { <span class="hljs-keyword">return</span> [<span class="hljs-string">&#x27;_Common&#x27;</span>, <span class="hljs-string">&#x27;index.md&#x27;</span>].<span class="hljs-title function_">indexOf</span>(v) &lt; <span class="hljs-number">0</span> })

    post.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> {
        <span class="hljs-comment">// 최초 1회 파일 리딩</span>
        <span class="hljs-keyword">const</span> isDir = fs.<span class="hljs-title function_">statSync</span>(<span class="hljs-string">`<span class="hljs-subst">${root}</span>/<span class="hljs-subst">${v}</span>`</span>).<span class="hljs-title function_">isDirectory</span>();

        <span class="hljs-keyword">if</span> (isDir) {
            <span class="hljs-comment">// 디렉토리/네비게이션 제작을 위한 데이터를 포함한 json 데이터</span>
            <span class="hljs-keyword">const</span> [title, index] = path.<span class="hljs-title function_">basename</span>(v, path.<span class="hljs-title function_">extname</span>(v)).<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;_&#x27;</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(index) !== <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">const</span> child = <span class="hljs-title function_">recursion</span>(<span class="hljs-string">`<span class="hljs-subst">${root}</span>/<span class="hljs-subst">${v}</span>`</span>, [...fold, index]);
                <span class="hljs-keyword">const</span> count = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(child).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> {
                    <span class="hljs-keyword">const</span> [type, index] = b.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;_&#x27;</span>);
                    <span class="hljs-keyword">return</span> a + (type === <span class="hljs-string">&#x27;dir&#x27;</span> ? child[b].<span class="hljs-property">count</span> : (<span class="hljs-built_in">parseInt</span>(index) === <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>));
                }, <span class="hljs-number">0</span>);

                <span class="hljs-keyword">const</span> item = {
                    title,
                    <span class="hljs-attr">file</span>: <span class="hljs-string">&#x27;&#x27;</span>,
                    <span class="hljs-attr">index</span>: <span class="hljs-built_in">parseInt</span>(index),
                    count,
                    <span class="hljs-comment">// 디렉토리 내부 아이템은 children이라는 데이터 내부에 저장된다.</span>
                    <span class="hljs-attr">children</span>: { ...child }
                };

                temp[<span class="hljs-string">`dir_<span class="hljs-subst">${index}</span>`</span>] = item;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// 포스팅 페이지 제작을 위한 데이터를 포함한 json 데이터</span>
            <span class="hljs-keyword">const</span> mdFile = <span class="hljs-title function_">matter</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">`<span class="hljs-subst">${root}</span>/<span class="hljs-subst">${v}</span>`</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>).<span class="hljs-title function_">trim</span>());
            <span class="hljs-keyword">const</span> title = mdFile.<span class="hljs-property">data</span>?.<span class="hljs-property">title</span>;
            <span class="hljs-keyword">const</span> index = mdFile.<span class="hljs-property">data</span>?.<span class="hljs-property">index</span> || <span class="hljs-number">0</span>;

            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">parseInt</span>(index) !== <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">const</span> item = {
                    title,
                    <span class="hljs-attr">file</span>: path.<span class="hljs-title function_">basename</span>(v, path.<span class="hljs-title function_">extname</span>(v)),
                    <span class="hljs-attr">index</span>: <span class="hljs-built_in">parseInt</span>(index),
                    <span class="hljs-attr">path</span>: <span class="hljs-string">`<span class="hljs-subst">${root}</span>/<span class="hljs-subst">${v}</span>`</span>,
                    fold,
                    <span class="hljs-attr">date</span>: mdFile.<span class="hljs-property">data</span>?.<span class="hljs-property">date</span> || <span class="hljs-string">&#x27;99999999&#x27;</span>,
                    ...mdFile.<span class="hljs-property">data</span>,
                    <span class="hljs-attr">content</span>: mdFile.<span class="hljs-property">content</span>
                };

                temp[<span class="hljs-string">`post_<span class="hljs-subst">${index}</span>`</span>] = item;
                utils.<span class="hljs-property">contents</span>.<span class="hljs-title function_">push</span>(item);
            }
        }


    })

    <span class="hljs-keyword">return</span> temp
}</code></pre><h2 id="bm-9">레이아웃 세분화</h2>
<ul>
<li>기존 하나의 텍스트 데이터를 기반으로 데이터만 추가하여 포스팅 페이지 html 코드를 제작했지만 개선된 버전에서는 포스팅 페이지 html 코드의 헤더와 profile, navi, content, prev, next 등 코드를 세분화 하여 최종적으로 하나로 합치도록 수정이 되었다.
그 결과 디자인 개선 작업이나 기능 추가 작업에서도 좀 더 직관적인 코드 분석과 개선 작업이 가능해졌다.</li>
</ul>
<pre class="theme-atom-one-dark"><code class="language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">assets</span> = (<span class="hljs-params">param</span>) =&gt; {
    <span class="hljs-keyword">const</span> { assetsUrl, index, fold } = param

    <span class="hljs-keyword">const</span> html = <span class="hljs-string">`
&lt;link rel=&#x27;stylesheet&#x27; href=&#x27;<span class="hljs-subst">${assetsUrl}</span>/markdown.css&#x27;&gt;
&lt;link rel=&#x27;stylesheet&#x27; href=&#x27;<span class="hljs-subst">${assetsUrl}</span>/skin.css&#x27;&gt;

&lt;style&gt;
    #p-<span class="hljs-subst">${index}</span> {
        color: rgb(76, 193, 237) !important;
    }
&lt;/style&gt;
&lt;script id=&#x27;data&#x27; type=&#x27;application/json&#x27;&gt;
{
    &#x27;fold&#x27;: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(fold)}</span>
}
&lt;/script&gt;

&lt;script src=&#x27;<span class="hljs-subst">${assetsUrl}</span>/skin.js&#x27;&gt;&lt;/script&gt;
    `</span>

    <span class="hljs-keyword">return</span> html
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">prev</span> = (<span class="hljs-params">param</span>) =&gt; {
    <span class="hljs-keyword">const</span> { url, prev } = param

    <span class="hljs-keyword">const</span> html = <span class="hljs-string">`
&lt;a href=&#x27;<span class="hljs-subst">${url}</span>/post/<span class="hljs-subst">${prev}</span>.html&#x27; class=&#x27;prev post&#x27;&gt;
    &lt;img src=&#x27;<span class="hljs-subst">${url}</span>/assets/img/prev.svg&#x27; alt=&#x27;&#x27; srcset=&#x27;&#x27;&gt;
&lt;/a&gt;
    `</span>

    <span class="hljs-keyword">return</span> html
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">next</span> = (<span class="hljs-params">param</span>) =&gt; {
    <span class="hljs-keyword">const</span> { url, next } = param

    <span class="hljs-keyword">const</span> html = <span class="hljs-string">`
&lt;a href=&#x27;<span class="hljs-subst">${url}</span>/post/<span class="hljs-subst">${next}</span>.html&#x27; class=&#x27;next post&#x27;&gt;
    &lt;img src=&#x27;<span class="hljs-subst">${url}</span>/assets/img/next.svg&#x27; alt=&#x27;&#x27; srcset=&#x27;&#x27;&gt;
&lt;/a&gt;
    `</span>

    <span class="hljs-keyword">return</span> html
}</code></pre><h2 id="bm-14">포스팅 파일 데이터 관리 방법 - gray-matter</h2>
<ul>
<li>기존 포스팅 파일을 위한 메타 데이터는 파일 이름 타이틀과 index 번호를 작성하고 좀더 디테일한 데이터는 파일 내용에 json 형식으로 작성하였고 파일 변환 과정에서 json 형식을 추출하고 삭제하는 방식을 사용하였다. 이러한 방법은 데이터 추가에 어려움을 야기하고 데이터 처리의 난이도를 높이게 되었다.
다양한 방법을 찾아보다가 gray-matter 라이브러리를 찾아 사용하게 되어 데이터 관리 방안을 개선할 수 있었다.</li>
</ul>


                        </div>

                        
            <script src="https://utteranc.es/client.js"
                repo="ballboyDev/personal-storage"
                issue-term="pathname"
                label="comments"
                theme="github-dark"
                crossorigin="anonymous"
                async>
            </script>

                    </div>
                </div>
            </body>
            </html>